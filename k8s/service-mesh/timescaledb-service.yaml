apiVersion: v1
kind: Service
metadata:
  name: timescaledb
  labels:
    app: timescaledb
spec:
  type: ClusterIP
  selector:
    app: timescaledb
  ports:
    # Service mesh port - routes to Envoy sidecar (mTLS)
    - port: 15001
      targetPort: 15001
      protocol: TCP
      name: postgres-mtls
    # Original database port (for direct access if needed)
    - port: 5432
      targetPort: 5432
      protocol: TCP
      name: postgres

